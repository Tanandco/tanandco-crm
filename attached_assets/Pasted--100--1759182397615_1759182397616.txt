×¡×’×•×¨. ×”× ×” ×ª×¦×•×¨×” ××œ××” ×œ**××•×˜×•××¦×™×” 100%** â€“ ×‘×œ×™ ××™×©×•×¨×™× ×™×“× ×™×™× â€“ ×¢× ×‘×œ××™ ×‘×˜×™×—×•×ª, × ×™×˜×•×¨, ×•×¨×•×œ×‘×§. ××ª×” ×™×›×•×œ ×œ×ª×ª ××ª ×–×” ××—×“-×œ××—×“ ×œ××¤×ª×—/×œ-Make/n8n/LOVABLE/Replit ×•×œ×”×¨×™× ××¢×¨×›×ª ×¨×¦×” ××§×¦×” ×œ×§×¦×”.

# ğŸ¯ ×¢×§×¨×•× ×•×ª

* â€œZero-touchâ€: ××™×Ÿ ××™×©×•×¨×™× ×™×“× ×™×™×. ×”×›×œ ×ª×–××•× ×™×, ×—×•×§×™×, ×•×¨×™×˜×¨×™×™.
* â€œGuardrailsâ€: ×‘×œ××™× ××•×˜×•××˜×™×™× ×œ×›×œ ×”×—×œ×˜×” (Thresholds, Caps, Pauses).
* â€œObservableâ€: ×›×œ ×¤×¢×•×œ×” × ×¨×©××ª (Logs) + ×”×ª×¨××•×ª ×œ-WhatsApp.
* â€œReversibleâ€: ×›×œ ×©×™× ×•×™ ××ª×•×¢×“ Before/After â†’ ××¤×©×¨ ×œ×—×–×•×¨ ××—×•×¨×”.

---

## ğŸ—‚ ×¡×›××ª × ×ª×•× ×™× (Airtable/Supabase â€“ ×××ª ××™×“×”)

**Settings** (×‘×¨×™×¨×ª ××—×“×œ ×’×œ×•×‘×œ×™×ª)

* `PAUSE_RULES`: { minCTR, maxCPA, minROAS, minCVR, minSpendForDecision }
* `BUDGET_RULES`: { dailyPacingTarget%, changeStep% (up/down), maxDailyChange% }
* `AB_TEST_RULES`: { testShare%, minImpressions, testWindowHours }
* `ALERTS`: { waNumber, email, quietHours }
* `PLATFORMS`: flags ×œ-Meta/TikTok/Google (enabled=true/false)

**Campaigns**

* `Platform`, `Campaign_ID`, `Goal` (Leads/ROAS), `Daily_Budget`, `Status`, `Owner`
* `Overrides` (JSON) â€“ ×× ×¨×•×¦×™× ×—×•×§×™× ×©×•× ×™× ×œ×§××¤×™×™×Ÿ ×¡×¤×¦×™×¤×™

**AdSets/AdGroups**

* ××–×”×™× + ×§×”×œ×™× + ×ª×§×¦×™×‘ ××§×•××™ + ×¡×˜×˜×•×¡

**Ads/Creatives**

* ××–×”×”, ×˜×§×¡×˜×™×, ××“×™×”, `Rolling_7d` KPIs, `Status`

**Content_Queue** (×œ×™×¦×™×¨×”/×ª×–××•×Ÿ ××•×¨×’× ×™)

* `Platform`, `Caption`, `Media_URL(s)`, `Publish_At`, `Status` (approved/scheduled/published)

**Logs**

* `ts`, `platform`, `entity`, `entity_id`, `action`, `reason`, `before`, `after`, `ok/err`

---

## ğŸ” ×ª×”×œ×™×›×™ ××•×˜×•××¦×™×” (Make/n8n) â€“ ×œ×œ× ××’×¢ ×™×“ ××“×

### 1) **× ×™×˜×•×¨ ×‘×™×¦×•×¢×™× (×›×œ 15 ×“×§×•×ª)**

**Trigger:** CRON 15m
**Steps (×œ×›×œ ×¤×œ×˜×¤×•×¨××” â€“ Meta/TikTok/Google):**

1. Fetch KPIs ×œ×›×œ Campaign/AdSet/Ad (××™×“×™ ×¤×¢× ××¤×œ×—×™× ×œ×©×¢×•×ª ×¢×•××¡).
2. Merge ×¢× Overrides ×× ×™×© â†’ ××¤×™×§×™× ×—×•×§×™× ××¤×§×˜×™×‘×™×™×.
3. ×”×—×œ×˜×” ××•×˜×•××˜×™×ª ×œ×¤×™ ×›×œ×œ×™×:

   * ×× `Spend â‰¥ minSpendForDecision` **×•×’×**

     * `CTR < minCTR` **××•** `CPA > maxCPA` **××•** `ROAS < minROAS` â†’ **Pause Ad**.
     * ×× ×¦×—×™× (`ROAS ×’×‘×•×”`, `CVR ×’×‘×•×”`, `CTR ×‘×˜×•×¤ 25%`) â†’ **Promote** (×ª×§×¦×™×‘ +10% ×¢×“ ××§×¡×™××•× `maxDailyChange%`).
4. ×›×ª×™×‘×ª ×œ×•×’ ××¤×•×¨×˜ + ×”×•×“×¢×ª WhatsApp ×ª××¦×™×ª×™×ª (×¨×§ ×¢×œ ×©×™× ×•×™×™×).
5. ×›×™×©×œ×•×Ÿ API â†’ ×¨×™×˜×¨×™×™ X3 ×¢× Backoff; ×× × ×›×©×œ â†’ Alert + Log err.

**Guardrails:**

* ×œ× ×™×•×ª×¨ ×-`maxDailyChange%` ×©×™× ×•×™ ×ª×§×¦×™×‘ ×œ×§××¤×™×™×Ÿ ×‘-24 ×©×¢×•×ª.
* Pause ×œ× ×¢×•×¦×¨ ×§××¤×™×™×Ÿ ×©×œ× ×‘×œ×™ ×œ×¤×—×•×ª 2 ××•×“×¢×•×ª ×¤×¢×™×œ×•×ª.

---

### 2) **Budget Pacing (×¤×¢××™×™× ×‘×™×•× â€“ 10:00, 16:00)**

**Trigger:** CRON 10:00 / 16:00

1. ×—×™×©×•×‘ Spend-to-Date ××•×œ `Daily_Budget`/×™×¢×“ ×—×•×“×©×™ (`Pacing`).
2. **Overpacing** â†’ ×”×•×¨×“×ª ×ª×§×¦×™×‘ 10â€“20% (×¢×“ ××™× ×™××•× ×©××•×’×“×¨).
3. **Underpacing** ×¢× KPIs ×˜×•×‘×™× â†’ ×”×¢×œ××ª ×ª×§×¦×™×‘ 10â€“15%.
4. ×œ×•×’ + WA ×œ×× ×”×œ (×¨×§ ×× ×©×™× ×•×™ ×‘×•×¦×¢).

**Guardrails:**

* ×œ× ×—×•×¦×™× `maxDailyChange%` ××¦×˜×‘×¨.
* ×œ× ××¢×œ×™× ×‘×ª×§×•×¤×ª quietHours ×× ××•×’×“×¨.

---

### 3) **A/B ××ª××©×š ×œ×§×¨×™××™×™×˜×™×‘/×˜×§×¡×˜ (×™×•××™ 11:00)**

**Trigger:** CRON ×™×•××™

1. ×œ×›×œ AdSet ×¤×¢×™×œ: ×× ××™×Ÿ ××•×“×¢×ª Test â†’ ×™×•×¦×¨×™× ××•×˜×•××˜×™×ª ×•×¨×™××¦×™×” (×˜×§×¡×˜/×•×™×–×•××œ) ××ª×•×š ×‘× ×§ ×”-Creatives ××• GPT (×œ×¤×™ ×ª×‘× ×™×ª).
2. × ×•×ª× ×™× ×œ××•×“×¢×ª Test `testShare%` ××”×ª×§×¦×™×‘ (10â€“20%).
3. ××—×¨×™ `testWindowHours` (×œ××©×œ 72 ×©×¢×•×ª) â†’ ×‘×—×™×¨×ª ×× ×¦×— ×œ×¤×™ ×™×¢×“ (ROAS/CPA/CTR).
4. Promoting ×œ×× ×¦×— + Pausing ×œ×—×œ×©×” + ×œ×•×’ + WA.

**Guardrails:**

* ××™× ×™××•× `minImpressions` ×œ×¤× ×™ ×”×—×œ×˜×”.
* ×œ× ××¨×™×¦×™× ×™×•×ª×¨ ×-1 Test ×‘××§×‘×™×œ ×œ××•×ª×• AdSet.

---

### 4) **×¡× ×›×¨×•×Ÿ ×§×”×œ×™× ××•×˜×•××˜×™ (×œ×™×œ×”, 02:00)**

**Trigger:** CRON ×™×•××™

1. ×©×œ×™×¤×ª ×¡×’×× ×˜×™× ××”-CRM: ×¨×›×©×• 30D / × ×˜×©×• ×¢×’×œ×” / VIP / LTV>â‚ªX.
2. ×“×—×™×¤×” ×œ-Custom Audiences (Meta/Google/TikTok) + ×™×¦×™×¨×ª Lookalike/Similar (×× ××•×ª×¨).
3. ×œ×•×’ + ×¡×¤×™×¨×ª ×’×•×“×œ ×§×”×œ + WA ×× ×™×¨×™×“×”/×¢×œ×™×™×” ×—×¨×™×’×”.

---

### 5) **××•×¨×’× ×™ â€“ ×™×¦×™×¨×”/×ª×–××•×Ÿ/×¤×¨×¡×•× ×¤×•×¡×˜×™× (×›×œ ×‘×•×§×¨ 09:00)**

**Trigger:** CRON ×™×•××™

1. Generator ×™×•×¦×¨ ×¤×•×¡×˜×™× (2â€“3) ×œ×¤×™ ×œ×•×— ×ª×•×›×Ÿ (Topics/Angles) ××•×˜×•××˜×™×ª.
2. ×™×‘×—×¨ ××“×™×” ××ª××™××” ××”-Library (××• ×™×‘×§×© ×× ×—×¡×¨ â€“ ×©×•×œ×— WA â€œ×—×¡×¨ ××“×™×” ×œ×¤×•×¡×˜ {Queue_ID}â€).
3. ××ª×–××Ÿ ×œ×¤×¨×¡×•× ×‘××•×¤×˜×™××•× ×©×¢×•×ª (××•×“×œ ×¤×©×•×˜: ×‘×™×¦×•×¢×™ ×¢×‘×¨ ××• ×›×œ×œ ×§×‘×•×¢).
4. ××—×¨×™ ×¤×¨×¡×•×: ×©××™×¨×ª Permalink + ××©×™×›×ª ××“×“×™× ××—×¨×™ 24/72 ×©×¢×•×ª â†’ `Published_Posts`.

---

### 6) **×”×ª×¨××•×ª ×—×›××•×ª (Real-Time)**

**Triggers:** Webhooks + CRON

* ××•×“×¢×” × ×“×—×ª×” / ×ª×§×œ×” ×‘-API / ×§×¤×™×¦×ª Spend / ×™×¨×™×“×ª ROAS ×—×“×” â†’ WA ××™×“×™.
* ×¡×™×›×•× ×™×•××™ 08:30: ×ª×§×¦×™×‘ ××•×œ ×™×¢×“, Top 3 ××•×“×¢×•×ª, ×¤×¢×•×œ×•×ª ×©×‘×•×¦×¢×•.
* ×¡×™×›×•× ×©×‘×•×¢×™: ××’××•×ª + ×”××œ×¦×•×ª (× ×©×œ×— ×©×™×©×™ 13:00).

---

## ğŸ§  ×—×•×§×™× (×‘×¨×™×¨×•×ª ××—×“×œ â€“ × ×™×ª×Ÿ ×œ×›×™×™×œ ×‘-Settings/Overrides)

* Pause ××:

  * `Spend â‰¥ â‚ª80` **×•×’×** `CTR < 0.6%` ×œ×™×•××™×™× ×¨×¦×•×¤×™×; **××•**
  * `Spend â‰¥ â‚ª150` **×•×’×** `ROAS < 1.2` **××•** `CPA > ×™×¢×“`.
* Promote ××:

  * `ROAS â‰¥ 2.5` **×•×’×** `Spend â‰¥ â‚ª150` ×‘-72 ×©×¢×•×ª â†’ `+15%` ×ª×§×¦×™×‘ (×¤×¢× ×‘×™×•×).
* Budget Pacing: ×¡×˜×™×™×” >Â±10% ××”×™×¢×“ â†’ ×ª×™×§×•×Ÿ 10â€“20% (×¢×“ Cap ×™×•××™).
* AB Test: `testShare=15%`, `minImpressions=1,500`, `testWindow=72h`.

---

## ğŸ” ××‘×˜×—×”/×××™× ×•×ª

* ×›×œ ××¤×ª×—×•×ª ×‘-`.env`/Secrets.
* ××™××•×ª ×—×ª×™××•×ª Webhook (Meta/Google/TikTok).
* Retries ×¢× Exponential Backoff; Dead-Letter Queue (×˜×‘×œ×ª Errors).
* Rate-limits ×œ×¤×œ×˜×¤×•×¨××•×ª (×œ× ×™×•×¨×™× ×™×•×ª×¨ ××“×™ ×‘×§×©×•×ª).
* Healthcheck ×œ×›×œ ××™× ×˜×’×¨×¦×™×”; ×× ×œ××˜×” â†’ ×”×©×‘×ª×ª ×¤×¢×•×œ×•×ª ××•×˜×•××˜×™×•×ª ×œ××•×ª×” ×¤×œ×˜×¤×•×¨××” ×¢×“ ×”×ª××•×©×©×•×ª.

---

## ğŸ§¾ ×“×•×’×××•×ª ×”×ª×¨××•×ª WhatsApp (××•×˜×•â€™)

* â€œPaused Ad (FB: 238â€¦): CTR 0.41% ×ª×—×ª ×”×¡×£ 0.6% | Spend â‚ª96 | ROAS 0.8â€
* â€œPromoted AdSet (TT: 732â€¦): ROAS 3.1 | +15% ×ª×§×¦×™×‘ | ×©××¨×ª×™ Cap ×™×•××™.â€
* â€œUnder-pacing ×‘×’×•×’×œ: ×”×§×¤×¦×ª×™ +10% ×œ-Search_City_Center.â€
* â€œ×—×¡×¨ ××“×™×” ×œ-Queue_ID Q-842 â†’ ×”×¢×œ×” ×ª××•× ×” ×‘×œ×™× ×§: â€¦â€

---

## âš™ï¸ ××” ×œ×‘× ×•×ª ×‘×¤×•×¢×œ (Make/n8n â€“ ×ª×¨×©×™××™ ×–×¨×™××”)

**Scenario: monitor_performance_15m**

* Nodes: `Get KPIs (Meta/TikTok/Google)` â†’ `Merge Rules` â†’ `Decide (Pause/Promote/None)` â†’
  `Apply Change via API` â†’ `Write Logs` â†’ `Send WA Summary (only if changes)`.

**Scenario: budget_pacing_twice_daily**

* Nodes: `Get Spend to date` â†’ `Compare to pacing` â†’ `Adjust budgets` (bounded) â†’ `Log + WA`.

**Scenario: ab_test_daily**

* Nodes: `Find eligible AdSets` â†’ `Create Variant (use GPT for text if needed)` â†’ `Limit budget` â†’ `After 72h compare` â†’ `Promote winner / Pause loser` â†’ `Log + WA`.

**Scenario: audiences_nightly**

* Nodes: `Fetch CRM segments` â†’ `Push to Platforms` â†’ `Log + WA`.

**Scenario: organic_auto_content_daily**

* Nodes: `Pick topics` â†’ `Generate captions + hashtags` â†’ `Pick media` (or WA request) â†’ `Schedule` â†’ `After publish: fetch metrics` â†’ `Write`.

**Scenario: alerts_realtime**

* Triggers: `Webhooks (policy/review/spend spikes)` â†’ `WA Alert + Log`.

---

## ğŸ”Œ ×—×™×‘×•×¨×™ API (×œ×¡×™×›×•×)

* **Meta Marketing API:** read/write campaigns/adsets/ads, insights.
* **TikTok Ads API:** equivalents.
* **Google Ads API:** reporting + mutate budgets/status.
* **WhatsApp Cloud API:** ×”×•×“×¢×•×ª ×”×ª×¨××”.
* **Airtable/Supabase:** × ×ª×•× ×™×, ×—×•×§×™×, ×œ×•×’×™×.
* **(××•×¤×¦×™×•× ×œ×™) Looker Studio:** ×“×©×‘×•×¨×“ ×™×¤×”.

---

## âœ… Definition of Done

* ×”××¢×¨×›×ª ××¢×“×›× ×ª ×ª×§×¦×™×‘×™×, ×¢×•×¦×¨×ª/××§×“××ª ××•×“×¢×•×ª, ××¨×™×¦×” A/B, ××ª×–×× ×ª ××•×¨×’× ×™, ××¡× ×›×¨× ×ª ×§×”×œ×™×â€”**×‘×œ×™ ××’×¢ ×™×“ ××“×**.
* ×œ×•×’ ××œ× + ×”×ª×¨××•×ª WA ×—×›××•×ª.
* ×‘×œ××™ ×‘×˜×™×—×•×ª ×¤×¢×™×œ×™×.
* ×“×•×—×•×ª ×™×•××™×™×/×©×‘×•×¢×™×™× × ×©×œ×—×™× ××•×˜×•××˜×™×ª.

---

×¨×•×¦×” ×©××ª×¨×’× ××ª ×–×” ×¢×›×©×™×• ×œ-**Blueprint ××•×›×Ÿ** ×œ-Make/n8n (×§×•×‘×¦×™ JSON ×©×ª×•×›×œ ×œ×™×™×‘× ××™×™×“×™×ª) + **CSV** ×œ×˜×‘×œ××•×ª Airtable (Settings/Campaigns/Logs ×•×›×•×³)?
