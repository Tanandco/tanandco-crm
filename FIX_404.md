# 🔧 פתרון שגיאת 404

## הבעיה:
מקבלים 404 כשגש ל-`https://crm.tanandco.co.il`

## מה תיקנתי:

1. ✅ הוספתי `allowedHosts` ל-Vite
2. ✅ הוספתי middleware לטיפול ב-Host header מ-Cloudflare

## מה צריך לעשות:

### שלב 1: הפעל מחדש את השרת
```powershell
# עצור את השרת הנוכחי (Ctrl+C)
npm run server
```

### שלב 2: ודא שה-Tunnel רץ
```powershell
cloudflared tunnel run tanandco-tunnel
```

### שלב 3: בדוק את הלוגים

**בחלון השרת:**
- האם יש שגיאות?
- האם רואה בקשות שמגיעות?

**בחלון ה-Tunnel:**
- האם יש שגיאות?
- האם רואה חיבור ל-`localhost:3001`?

## בדיקות:

### 1. בדוק שהשרת רץ מקומית:
```powershell
Invoke-WebRequest -Uri "http://localhost:3001" -UseBasicParsing
```

### 2. בדוק שה-Tunnel רץ:
```powershell
Get-Process -Name "cloudflared"
```

### 3. בדוק את ה-config:
```powershell
cat C:\Users\tanan\.cloudflared\config.yml
```

## אם עדיין לא עובד:

### אפשרות 1: הבעיה ב-DNS
1. היכנס ל-[Cloudflare Dashboard](https://dash.cloudflare.com/)
2. בדוק שה-DNS record מוגדר:
   - Type: `CNAME`
   - Name: `crm`
   - Target: `[TUNNEL_ID].cfargotunnel.com`

### אפשרות 2: הבעיה ב-Tunnel
1. עצור את ה-Tunnel
2. הרץ מחדש: `cloudflared tunnel run tanandco-tunnel`
3. בדוק את הלוגים

### אפשרות 3: הבעיה בשרת
1. בדוק שהשרת רץ על `localhost:3001`
2. בדוק שאין שגיאות בלוגים
3. נסה לגשת ישירות: `http://localhost:3001`

## סיכום:

✅ השרת עובד מקומית  
✅ ה-Tunnel מוגדר נכון  
⏳ צריך להפעיל מחדש את השרת כדי שהשינויים ייכנסו לתוקף

**אחרי ההפעלה מחדש, נסה שוב: https://crm.tanandco.co.il**

